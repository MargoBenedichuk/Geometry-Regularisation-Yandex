experiment_name: "mnist_geom"
seed: 42
device: "cuda"

# === Dataset ===
dataset:
  name: "mnist"                     # Название датасета: mnist / cifar10 / custom
  root: "./data"
  val_ratio: 0.2                    # Доля валидации
  transform: null                   # Позже можно заменить на кастомную
  base: ${dataset_loader.mnist}    # Callable, возвращающий raw Dataset

# === Training ===
train:
  batch_size: 64
  epochs: 20
  lr: 0.001

# === Model ===
model:
  type: "simple_cnn"
  input_shape: [1, 28, 28]
  hidden_dim: 128
  num_classes: 10
  head_type: "linear"              # linear | mlp | projection

# === Regularization ===
regularization:
  type: "geometric"                # geometric | topological | baseline
  weight: 1.0                      # Lambda weight on reg loss
  metric: "spectral_entropy"      # local_dim | spectral_entropy | geodesic
  knn_k: 10

# === Logging and Output ===
logging:
  mlflow: true
  project: "geometric-regularization"
  log_dir: "./experiments_result/"

output:
  save_metrics: true
  save_latents: true
  save_umap: true
  dir: "./experiments_result/exp_mnist_geo/"

dataset_loader:
  mnist: src.utils.registry.get_mnist
  cifar10: src.utils.registry.get_cifar10